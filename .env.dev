# =============================================================================
# ACGS-2 Development Environment Configuration
# =============================================================================
# Constitutional Hash: cdd01ef066bc6cf2
# Usage: docker compose -f docker-compose.dev.yml --env-file .env.dev up -d
# =============================================================================

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------
ACGS_ENV=development
ENVIRONMENT=development
TENANT_ID=acgs-dev
LOG_LEVEL=INFO
DEBUG=true
CONSTITUTIONAL_HASH=cdd01ef066bc6cf2
MACI_STRICT_MODE=true

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Change JWT_SECRET in production!
JWT_SECRET=dev-jwt-secret-min-32-chars-required

# CORS Configuration - Security Notice:
# - Wildcards (*) are prohibited in production for security (prevents CSRF attacks)
# - Development uses explicit localhost origins for common ports (3000, 8080, 5173)
# - Production MUST specify exact domain URLs (e.g., https://acgs2.example.com)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:8080,http://127.0.0.1:5173

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# SECURITY NOTE: In production, use rediss:// (SSL/TLS) protocol
# Development uses redis:// for compatibility with local Redis instances
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_PASSWORD=dev_password

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP=kafka:29092
KAFKA_PASSWORD=
KAFKA_TOPIC_FEEDBACK=governance.feedback.v1
KAFKA_TOPIC_PREDICTIONS=governance.predictions.v1

# -----------------------------------------------------------------------------
# OPA (Open Policy Agent) Configuration
# -----------------------------------------------------------------------------
OPA_URL=http://opa:8181

# -----------------------------------------------------------------------------
# PostgreSQL for MLflow Configuration
# -----------------------------------------------------------------------------
POSTGRES_ML_HOST=postgres-ml
POSTGRES_ML_PORT=5432
POSTGRES_ML_DB=mlflow_db
POSTGRES_ML_USER=mlflow
POSTGRES_ML_PASSWORD=mlflow_password

# -----------------------------------------------------------------------------
# MLflow Configuration
# -----------------------------------------------------------------------------
MLFLOW_PORT=5000
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow:mlflow_password@postgres-ml:5432/mlflow_db
MLFLOW_ARTIFACT_ROOT=/mlruns

# -----------------------------------------------------------------------------
# ML Governance Service Configuration
# -----------------------------------------------------------------------------
ML_GOVERNANCE_URL=http://agent-bus:8000

# Model Registry Configuration
MODEL_REGISTRY_NAME=governance_impact_scorer
CHAMPION_ALIAS=champion
CANDIDATE_ALIAS=candidate
AB_TEST_SPLIT=0.1

# -----------------------------------------------------------------------------
# Drift Monitoring Configuration (Evidently AI)
# -----------------------------------------------------------------------------
EVIDENTLY_REFERENCE_DATA_PATH=/app/data/reference/training_baseline.parquet
DRIFT_CHECK_INTERVAL_HOURS=6
DRIFT_PSI_THRESHOLD=0.2

# -----------------------------------------------------------------------------
# External Service API Tokens (for MCP servers)
# -----------------------------------------------------------------------------
# SECURITY NOTE: Never commit real tokens to version control
# Use environment variables or secure secret management in production
NEON_AUTH_HEADER=Bearer ${NEON_API_TOKEN}
NEON_API_TOKEN=dev_neon_token_placeholder

# -----------------------------------------------------------------------------
# Service URLs (for local development outside Docker)
# -----------------------------------------------------------------------------
# Use these when running services directly on host machine:
# REDIS_URL=redis://localhost:6379/0
# KAFKA_BOOTSTRAP=localhost:19092
# OPA_URL=http://localhost:8181
# MLFLOW_TRACKING_URI=http://localhost:5000
# AGENT_BUS_URL=http://localhost:8000

# =============================================================================
# End of Configuration
# =============================================================================
