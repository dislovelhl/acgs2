# ACGS-2 Core MyPy Configuration
# Purpose: Type checking for core modules (326 'Any' occurrences to fix)
# Status: Phase 1 - Baseline with module-specific targets
# Last Updated: 2026-01-03

[mypy]
# Python version target
python_version = 3.11

# Import handling
ignore_missing_imports = True
follow_imports = silent
namespace_packages = True

# Incremental checking
incremental = True
cache_dir = .mypy_cache

# Output configuration
show_error_codes = True
show_column_numbers = True
show_error_context = True
pretty = True
color_output = True

# Warning level - Start with warnings for gradual adoption
warn_return_any = True
warn_unused_configs = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

# Strictness settings - Conservative for large codebase
strict_optional = True
check_untyped_defs = True
no_implicit_optional = True
strict_equality = True

# Disabled for initial adoption, enable per-module
disallow_untyped_defs = False
disallow_any_generics = False
disallow_incomplete_defs = False

# Exclude patterns
exclude = (?x)(
    ^venv/
    | ^\.venv/
    | ^build/
    | ^dist/
    | ^node_modules/
    | ^\.mypy_cache/
    | /tests/
    | /test_
    | _test\.py$
    | ^tools/
    | ^migrations/
    | ^alembic/
  )

# Pydantic plugin
plugins = pydantic.mypy

# ============================================================================
# Module-Specific Configurations
# These will be progressively enabled as type improvements are made
# ============================================================================

# Phase 3: Breakthrough Module (79 occurrences)
# Target: verification, temporal, context systems
# [mypy-breakthrough.verification.*]
# warn_return_any = True
#
# [mypy-breakthrough.temporal.*]
# warn_return_any = True
#
# [mypy-breakthrough.context.*]
# warn_return_any = True

# Phase 4: Core Services (42 occurrences)
# Target: policy_registry, hitl-approvals, ml_governance
# [mypy-services.policy_registry.*]
# disallow_incomplete_defs = True
#
# [mypy-services.hitl_approvals.*]
# disallow_incomplete_defs = True
#
# [mypy-services.ml_governance.*]
# disallow_incomplete_defs = True

# Phase 5: Enhanced Agent Bus (138 occurrences)
# Already has partial configuration in enhanced_agent_bus/mypy.ini
# Will be migrated here for consistency

# Phase 6: Shared Libraries (46 occurrences)
# Target: caching, logging, auth, middleware
# [mypy-shared.tiered_cache]
# disallow_any_generics = True
#
# [mypy-shared.structured_logging]
# disallow_untyped_defs = True
#
# [mypy-shared.auth.*]
# disallow_incomplete_defs = True

# Phase 6: Integrations (17 occurrences)
# Target: nemo_agent_toolkit
# [mypy-integrations.nemo_agent_toolkit.*]
# disallow_incomplete_defs = True

# Phase 6: SDK (4 occurrences)
# Target: Python SDK client and models
# [mypy-sdk.python.acgs2_sdk.*]
# disallow_untyped_defs = True
# disallow_incomplete_defs = True

# ============================================================================
# Third-Party Library Type Stubs
# ============================================================================

[mypy-redis.*]
ignore_missing_imports = True

[mypy-kafka.*]
ignore_missing_imports = True

[mypy-confluent_kafka.*]
ignore_missing_imports = True

[mypy-litellm.*]
ignore_missing_imports = True

[mypy-mlflow.*]
ignore_missing_imports = True

[mypy-evidently.*]
ignore_missing_imports = True

[mypy-river.*]
ignore_missing_imports = True

[mypy-temporal.*]
ignore_missing_imports = True

[mypy-slowapi.*]
ignore_missing_imports = True

[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-sqlalchemy.*]
ignore_missing_imports = True

[mypy-alembic.*]
ignore_missing_imports = True

[mypy-psycopg2.*]
ignore_missing_imports = True

[mypy-httpx.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-pandas.*]
ignore_missing_imports = True

[mypy-sklearn.*]
ignore_missing_imports = True

[mypy-transformers.*]
ignore_missing_imports = True

[mypy-z3.*]
ignore_missing_imports = True

[mypy-streamlit.*]
ignore_missing_imports = True

[mypy-vault.*]
ignore_missing_imports = True

[mypy-hvac.*]
ignore_missing_imports = True

[mypy-opa.*]
ignore_missing_imports = True

[mypy-boto3.*]
ignore_missing_imports = True

[mypy-botocore.*]
ignore_missing_imports = True

[mypy-aioboto3.*]
ignore_missing_imports = True

[mypy-pybreaker.*]
ignore_missing_imports = True

[mypy-jinja2.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-toml.*]
ignore_missing_imports = True
