# =============================================================================
# ACGS-2 Integration Service Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env files with real credentials to version control
# =============================================================================

# =============================================================================
# Core Service Configuration
# =============================================================================
APP_ENV=development
APP_DEBUG=false
INTEGRATION_SERVICE_PORT=8100
CORS_ORIGINS=*

# =============================================================================
# Internal Service URLs
# =============================================================================
AGENT_BUS_URL=http://localhost:8000
OPA_URL=http://localhost:8181
REDIS_URL=redis://localhost:6379/0
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# =============================================================================
# Splunk Integration
# =============================================================================
# Splunk HEC (HTTP Event Collector) configuration
# HEC uses port 8088, management API uses port 8089
SPLUNK_HOST=your-splunk-instance.com
SPLUNK_HEC_PORT=8088
SPLUNK_HEC_TOKEN=<your-hec-token>
SPLUNK_INDEX=governance_events
SPLUNK_SOURCE=acgs2
SPLUNK_SOURCETYPE=governance:event

# For Splunk Cloud, use the following format:
# SPLUNK_HOST=inputs.your-stack.splunkcloud.com

# =============================================================================
# Microsoft Sentinel Integration
# =============================================================================
# Azure AD Service Principal credentials
AZURE_TENANT_ID=<azure-ad-tenant-id>
AZURE_CLIENT_ID=<service-principal-client-id>
AZURE_CLIENT_SECRET=<service-principal-secret>

# Data Collection Rule (DCR) configuration
SENTINEL_DCE_ENDPOINT=https://<dce-name>.<region>.ingest.monitor.azure.com
SENTINEL_DCR_IMMUTABLE_ID=<data-collection-rule-id>
SENTINEL_STREAM_NAME=Custom-GovernanceEvents_CL

# Log Analytics workspace (for querying, optional)
SENTINEL_WORKSPACE_ID=<log-analytics-workspace-id>

# =============================================================================
# Jira Integration
# =============================================================================
# Jira Cloud configuration
JIRA_BASE_URL=https://your-domain.atlassian.net
JIRA_USER_EMAIL=your-email@example.com
JIRA_API_TOKEN=<jira-api-token>

# Default project and issue type for created tickets
JIRA_DEFAULT_PROJECT=GOV
JIRA_DEFAULT_ISSUE_TYPE=Bug

# For Jira Server/Data Center, use different auth:
# JIRA_AUTH_TYPE=basic  # or 'pat' for Personal Access Token
# JIRA_USERNAME=<username>
# JIRA_PASSWORD=<password>

# =============================================================================
# ServiceNow Integration
# =============================================================================
SERVICENOW_INSTANCE=https://your-instance.service-now.com
SERVICENOW_USERNAME=<service-account-username>
SERVICENOW_PASSWORD=<service-account-password>

# Default table and category for incidents
SERVICENOW_DEFAULT_TABLE=incident
SERVICENOW_DEFAULT_CATEGORY=Governance

# OAuth configuration (alternative to basic auth)
# SERVICENOW_AUTH_TYPE=oauth
# SERVICENOW_CLIENT_ID=<client-id>
# SERVICENOW_CLIENT_SECRET=<client-secret>

# =============================================================================
# CI/CD Integration Tokens
# =============================================================================
# GitHub Personal Access Token (for GitHub Actions integration development)
GITHUB_TOKEN=<github-personal-access-token>

# GitLab Access Token (for GitLab CI integration development)
GITLAB_TOKEN=<gitlab-access-token>
GITLAB_URL=https://gitlab.com

# =============================================================================
# Webhook Framework
# =============================================================================
# Webhook delivery configuration
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_SECONDS=1
WEBHOOK_TIMEOUT_SECONDS=30

# HMAC signing secret for webhook payload signatures
WEBHOOK_SIGNING_SECRET=<your-signing-secret>

# =============================================================================
# Security & Encryption
# =============================================================================
# Credential encryption key (generate with: openssl rand -hex 32)
CREDENTIAL_ENCRYPTION_KEY=<32-byte-hex-key>

# JWT configuration - REQUIRED for API authentication
# The integration service uses JWT authentication from acgs2-core/shared/security/auth.py
# This secret is used to sign and verify JWT tokens for policy validation endpoints
# Generate a secure secret with: openssl rand -base64 32
JWT_SECRET=<jwt-secret-key>
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
# Optional: Public key for asymmetric JWT verification
# JWT_PUBLIC_KEY=<public-key-for-jwt-verification>

# =============================================================================
# Observability
# =============================================================================
# OpenTelemetry configuration
OTEL_SERVICE_NAME=integration-service
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORT_TRACES=true
OTEL_EXPORT_METRICS=true

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
