{
  "file_path": "CONTRIBUTING.md",
  "main_branch_history": [],
  "task_views": {
    "056-reduce-excessive-any-type-usage-in-python-codebase": {
      "task_id": "056-reduce-excessive-any-type-usage-in-python-codebase",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "# Contributing to ACGS-2\n\nThank you for your interest in contributing to ACGS-2 (Advanced Constitutional Governance System)! This document provides guidelines and information for contributors.\n\n## \ud83d\ude80 Quick Start\n\n### Development Environment Setup\n\n1. **Prerequisites**\n   - Docker and Docker Compose\n   - Python 3.11+\n   - Git\n\n2. **Clone and Setup**\n   ```bash\n   git clone <repository-url>\n   cd acgs2\n   cp .env.dev .env  # Configure environment variables\n   ```\n\n3. **Start Development Environment**\n   ```bash\n   ./scripts/start-dev.sh\n   ```\n\n4. **Verify Setup**\n   - API Gateway: http://localhost:8080/health\n   - Agent Bus: http://localhost:8000/health\n   - OPA: http://localhost:8181/health\n\n## \ud83d\udccb Development Workflow\n\n### 1. Choose an Issue\n- Check [Issues](../../issues) for tasks labeled `good first issue` or `help wanted`\n- Comment on the issue to indicate you're working on it\n\n### 2. Create a Branch\n```bash\ngit checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/issue-number-description\n```\n\n### 3. Make Changes\n- Follow the [Code Style Guidelines](#code-style)\n- Write tests for new functionality\n- Update documentation as needed\n\n### 4. Test Your Changes\n```bash\n# Run tests\n./scripts/run-tests.sh\n\n# Run specific test file\ndocker-compose -f docker-compose.dev.yml exec agent-bus python -m pytest tests/test_specific.py -v\n\n# Check code quality\ndocker-compose -f docker-compose.dev.yml exec agent-bus ruff check .\ndocker-compose -f docker-compose.dev.yml exec agent-bus black --check .\n```\n\n### 5. Commit Changes\n```bash\ngit add .\ngit commit -m \"feat: add your feature description\n\n- What was changed\n- Why it was changed\n- How it was tested\"\n```\n\n### 6. Create Pull Request\n- Push your branch to GitHub\n- Create a Pull Request with a clear description\n- Reference any related issues\n\n## \ud83d\udee0\ufe0f Development Environment\n\n### Available Services\n\n| Service | Port | Purpose | Health Check |\n|---------|------|---------|--------------|\n| API Gateway | 8080 | Request routing | `/health` |\n| Agent Bus | 8000 | Core processing | `/health` |\n| OPA | 8181 | Policy engine | `/health` |\n| Redis | 6379 | Caching | `redis-cli ping` |\n| Kafka | 9092 | Messaging | Kafka topics |\n\n### Useful Commands\n\n```bash\n# View logs\ndocker-compose -f docker-compose.dev.yml logs -f [service-name]\n\n# Access service shell\ndocker-compose -f docker-compose.dev.yml exec [service-name] bash\n\n# Restart service\ndocker-compose -f docker-compose.dev.yml restart [service-name]\n\n# Stop environment\n./scripts/stop-dev.sh\n\n# Clean restart\ndocker-compose -f docker-compose.dev.yml down -v && ./scripts/start-dev.sh\n```\n\n## \ud83d\udcbb Code Style Guidelines\n\n### Python Code Style\n- Follow [PEP 8](https://pep8.org/) conventions\n- Use [Black](https://black.readthedocs.io/) for code formatting\n- Use [Ruff](https://github.com/astral-sh/ruff) for linting\n- Maximum line length: 100 characters\n\n### Commit Messages\nFollow [Conventional Commits](https://conventionalcommits.org/) format:\n\n```\ntype(scope): description\n\n[optional body]\n\n[optional footer]\n```\n\nTypes: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`\n\n### Documentation\n- Update docstrings for all public functions/classes\n- Add type hints for function parameters and return values\n- Update README.md and relevant docs for significant changes\n\n## \ud83e\uddea Testing\n\n> For comprehensive testing documentation, see the [Testing Guide](./docs/testing-guide.md).\n\n### Coverage Requirements\n\n**ACGS-2 enforces strict coverage thresholds:**\n\n| Metric | Minimum | CI Enforcement |\n|--------|---------|----------------|\n| **System-wide** | 85% | Build fails below threshold |\n| **Critical Paths** | 95% | Policy, auth, persistence |\n| **Branch Coverage** | 85% | Enabled via `--cov-branch` |\n| **Patch Coverage** | 80% | PR coverage check |\n\n### Test Structure\n```\nacgs2-core/tests/\n\u251c\u2500\u2500 unit/           # Unit tests (isolated components)\n\u251c\u2500\u2500 integration/    # Integration tests (cross-service)\n\u2502   \u251c\u2500\u2500 conftest.py       # Integration fixtures\n\u2502   \u251c\u2500\u2500 test_agent_bus.py # Agent Bus API tests\n\u2502   \u251c\u2500\u2500 test_opa.py       # OPA policy tests\n\u2502   \u251c\u2500\u2500 test_redis.py     # Redis cache tests\n\u2502   \u2514\u2500\u2500 test_kafka.py     # Kafka messaging tests\n\u251c\u2500\u2500 e2e/           # End-to-end tests\n\u2514\u2500\u2500 fixtures/      # Test data and fixtures\n```\n\n### Running Tests\n\n```bash\n# Run unified test suite with parallel execution\npython scripts/run_unified_tests.py --run --coverage --parallel\n\n# Run with pytest directly (parallel execution with coverage)\ncd acgs2-core\npytest -n auto --cov=acgs2_core --cov-branch --cov-report=term-missing --cov-fail-under=85\n\n# Unit tests only\npytest tests/unit/ -v\n\n# Integration tests (mock-based, no services required)\npytest tests/integration/ -v -m integration\n\n# Integration tests with live services\nSKIP_LIVE_TESTS=false pytest tests/integration/ -v -m integration\n\n# By marker\npytest -m constitutional   # Constitutional compliance tests\npytest -m \"not slow\"       # Skip slow tests\n```\n\n### Coverage Commands\n\n```bash\n# Terminal report with missing lines\ncoverage report --precision=2 --show-missing\n\n# HTML report (opens in browser)\ncoverage html && open htmlcov/index.html\n\n# Check critical path coverage\ncoverage report --include=\"**/opa_*.py,**/policy_*.py,**/kafka_bus.py,**/redis_*.py\"\n```\n\n### TypeScript Testing\n\n```bash\n# claude-flow\ncd claude-flow\nnpm test -- --coverage\n\n# acgs2-neural-mcp\ncd acgs2-neural-mcp\nnpm test -- --coverage\n```\n\n### Test Guidelines\n\n- **Coverage Enforcement**: All new code must meet 85% coverage threshold\n- **Critical Paths**: Auth, policy, and persistence code requires 95% coverage\n- **Write tests first**: Use TDD for complex features\n- **Descriptive names**: `test_agent_bus_returns_error_when_policy_validation_fails`\n- **One assertion per test**: Focus on single behavior\n- **Use fixtures**: Share setup code via pytest fixtures\n- **Test edge cases**: Include error conditions and boundary cases\n- **Branch coverage**: Ensure all code paths are tested\n\n### Test Markers\n\n| Marker | Description | Usage |\n|--------|-------------|-------|\n| `@pytest.mark.constitutional` | Constitutional compliance tests | Required for governance code |\n| `@pytest.mark.integration` | Integration tests | Cross-service testing |\n| `@pytest.mark.asyncio` | Async test functions | Async code testing |\n| `@pytest.mark.slow` | Slow-running tests | Can be skipped in quick runs |\n\n## \ud83d\udd12 Security Considerations\n\n### Secrets Detection and Protection\n\nACGS-2 implements **automated secrets detection** to prevent accidental credential commits through a multi-layered pre-commit hook system:\n\n#### \ud83d\udee1\ufe0f What Gets Detected\n\nThe pre-commit hooks automatically scan for:\n- **AI Provider Credentials**: Anthropic, Claude Code, OpenRouter, HuggingFace, OpenAI API keys\n- **Infrastructure Secrets**: AWS keys, JWT secrets, Vault tokens, database passwords\n- **Generic Patterns**: 140+ built-in patterns for SSH keys, GitHub tokens, cloud credentials, etc.\n\n#### \u2705 What You CAN Commit\n\n**Safe to commit:**\n- Development placeholders (e.g., `dev-jwt-secret-min-32-chars-required`, `test-api-key-placeholder`)\n- Example configuration files (`.env.example` with placeholder values)\n- Test fixtures clearly marked as fake secrets\n- Public certificates for testing (e.g., SAML test certificates)\n\n**Example safe values:**\n```env\n# .env.example\nJWT_SECRET=dev-jwt-secret-min-32-chars-required\nANTHROPIC_API_KEY=your-anthropic-api-key-here\nPOSTGRES_PASSWORD=test-password-123\n```\n\n#### \u274c What You CANNOT Commit\n\n**Never commit:**\n- Real API keys from any provider (Anthropic, OpenAI, AWS, etc.)\n- Production passwords or tokens\n- Private keys without `.gitleaksignore` exception\n- Actual JWT secrets or session keys\n- Real database credentials\n\n#### \ud83d\udea8 When Pre-commit Hooks Fail\n\nIf the secrets detection hooks block your commit:\n\n**1. Is it a real secret?**\n   - **YES**: Remove it and use `secrets_manager.py` or Vault\n   - **NO**: Follow the quick-fix guide below\n\n**2. Is it a false positive?**\n   - Check if it matches placeholder patterns (`dev-*`, `test-*`, `your-*`)\n   - Add to `.secrets-allowlist.yaml` if it's safe\n   - Add fingerprint to `.gitleaksignore` if needed\n\n**3. Quick fixes:**\n```bash\n# Option 1: Use secrets_manager.py for safe storage\nfrom acgs2_core.shared.secrets_manager import secrets_manager\nsecrets_manager.set(\"MY_SECRET\", \"real-value-here\")\n\n# Option 2: Add to allow-list for safe placeholders\n# Edit .secrets-allowlist.yaml and add your pattern\n\n# Option 3: Emergency bypass (use sparingly!)\ngit commit --no-verify -m \"message\"  # Only for verified safe content\n```\n\n#### \ud83d\udcd6 Documentation\n\nFor comprehensive guidance:\n- **[Migration Guide](./docs/SECRETS_DETECTION_MIGRATION.md)** - **If you're an existing developer**, start here to update your hooks\n- **[Secrets Detection Guide](./docs/SECRETS_DETECTION.md)** - Complete documentation on what's detected and how it works\n- **[Quick-Fix Guide](./docs/SECRETS_QUICK_FIX.md)** - Step-by-step solutions for common issues\n- **[Secrets Manager Integration](./docs/SECRETS_DETECTION.md#integration-with-secrets_managerpy)** - How to use the safe storage system\n\n#### \ud83d\udd27 Setup\n\n**For new developers**, the secrets detection hooks are automatically installed when you run:\n```bash\npre-commit install  # One-time setup\n```\n\n**For existing developers**, follow the [Migration Guide](./docs/SECRETS_DETECTION_MIGRATION.md) to update your hooks and scan existing work.\n\nAfter installation, every commit is automatically scanned. The hooks run quickly (<5s) and provide actionable error messages if secrets are detected.\n\n### Code Security\n- Never commit secrets or credentials (enforced by automated hooks)\n- Validate all inputs to prevent injection attacks\n- Use parameterized queries for database operations\n- Implement proper authentication and authorization\n- Use `secrets_manager.py` for credential storage and validation\n\n### Reporting Security Issues\n- **DO NOT** create public GitHub issues for security vulnerabilities\n- Email security concerns to [security@acgs2.org](mailto:security@acgs2.org)\n- Include detailed reproduction steps and potential impact\n\n## \ud83d\udcda Architecture Overview\n\n### Core Components\n\n1. **Enhanced Agent Bus**: Core message processing and routing\n2. **Constitutional Validation**: Ensures all operations comply with governance rules\n3. **Policy Engine (OPA)**: External policy decision point\n4. **Audit Service**: Blockchain-anchored audit logging\n5. **API Gateway**: Request routing and load balancing\n\n### Key Design Principles\n\n- **Constitutional Compliance**: All operations must pass constitutional validation\n- **Zero Trust**: Assume breach and verify everything\n- **Immutable Audit Trail**: All actions are logged to blockchain\n- **Fail-Safe Defaults**: System fails securely when components fail\n\n## \ud83e\udd1d Code Review Process\n\n### Pull Request Requirements\n- [ ] Tests pass (`python scripts/run_unified_tests.py --run --coverage`)\n- [ ] Code coverage meets thresholds (85% system-wide, 95% critical paths)\n- [ ] Code style checks pass (Ruff, Black)\n- [ ] Documentation updated\n- [ ] No security vulnerabilities\n- [ ] Constitutional compliance maintained\n\n### Review Checklist\n- [ ] Code is readable and well-documented\n- [ ] Tests are comprehensive and passing\n- [ ] Coverage thresholds met (check Codecov PR comment)\n- [ ] No breaking changes without migration plan\n- [ ] Performance impact assessed\n- [ ] Security implications reviewed\n\n## \ud83d\udcde Getting Help\n\n### Communication Channels\n- **GitHub Issues**: Bug reports and feature requests\n- **GitHub Discussions**: General questions and discussions\n- **Documentation**: Check docs/ directory first\n\n### Finding Your Way Around\n- **README.md**: High-level project overview\n- **docs/**: Detailed documentation\n- **ARCHITECTURE.md**: System architecture details\n- **C4-Documentation/**: Component diagrams and documentation\n\n## \ud83c\udfaf Areas for Contribution\n\n### High Priority\n- Performance optimization\n- Security hardening\n- Test coverage improvement\n- Documentation enhancement\n\n### Medium Priority\n- New blockchain network support\n- Additional policy templates\n- UI/UX improvements\n- Internationalization\n\n### Future Opportunities\n- Mobile app development\n- Advanced analytics dashboard\n- Machine learning integration\n- Constitutional AI research\n\n## \ud83d\udcc4 License\n\nBy contributing to ACGS-2, you agree that your contributions will be licensed under the same MIT License that covers the project.\n\n## \ud83d\ude4f Recognition\n\nContributors are recognized in:\n- GitHub repository contributors list\n- CHANGELOG.md for significant contributions\n- Project documentation acknowledgments\n\nThank you for contributing to ACGS-2! \ud83d\ude80\n",
        "timestamp": "2026-01-04T05:35:58.374613"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "056-reduce-excessive-any-type-usage-in-python-codebase",
        "description": "Found 373 occurrences of ': Any' type annotations across 120+ Python files, with high concentrations in integration-service (16 occurrences), acgs2-core/breakthrough (79 occurrences), and acgs2-core/enhanced_agent_bus (50+ occurrences). Excessive use of 'Any' defeats the purpose of type hints and can mask type-related bugs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-03T19:36:18.076970",
  "last_updated": "2026-01-04T05:35:59.020383"
}