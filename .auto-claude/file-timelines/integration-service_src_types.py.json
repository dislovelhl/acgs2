{
  "file_path": "integration-service/src/types.py",
  "main_branch_history": [],
  "task_views": {
    "056-reduce-excessive-any-type-usage-in-python-codebase": {
      "task_id": "056-reduce-excessive-any-type-usage-in-python-codebase",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "\"\"\"\nType Aliases for Integration Service\n\nThis module defines common type aliases used throughout the integration service\nto replace excessive 'Any' usage with more specific, documented types.\n\nUsage Guidelines:\n    - Use JSONDict for general JSON-like dictionaries with string keys\n    - Use JSONValue for any valid JSON value type\n    - Use EventData for governance event payloads\n    - Use ConfigDict for configuration dictionaries\n    - Use specific Protocol types when you need structural typing\n\nWhen to use 'Any' (sparingly):\n    - Truly dynamic data where structure is completely unknown\n    - Third-party library return types that aren't typed\n    - Generic wrapper functions (prefer TypeVar when possible)\n\nAlways prefer Union types or Protocols over 'Any' when possible.\n\"\"\"\n\nfrom typing import Any, Callable, Dict, List, Protocol, TypeVar, Union\n\n# ============================================================================\n# JSON and Data Structure Types\n# ============================================================================\n\n# General JSON types - use these for JSON payloads, API responses, etc.\nJSONPrimitive = Union[str, int, float, bool, None]\nJSONValue = Union[JSONPrimitive, \"JSONDict\", \"JSONList\"]\nJSONDict = Dict[str, JSONValue]\nJSONList = List[JSONValue]\n\n# More specific JSON structures\nNestedDict = Dict[str, Any]  # For deeply nested structures where full typing is impractical\nStringDict = Dict[str, str]  # For simple string-to-string mappings\nMetadataDict = Dict[str, JSONValue]  # For metadata fields\n\n\n# ============================================================================\n# Event and Message Types\n# ============================================================================\n\n# Event data structures\nEventData = Dict[str, JSONValue]  # Governance event payload\nEventContext = Dict[str, JSONValue]  # Additional context for events\nEventMetadata = Dict[str, JSONValue]  # Event metadata (timestamps, IDs, etc.)\n\n# Message processing\nMessagePayload = Dict[str, JSONValue]  # Generic message payload\nKafkaMessage = Any  # Kafka consumer message object (typed by kafka-python)\n\n\n# ============================================================================\n# Configuration and Settings Types\n# ============================================================================\n\nConfigDict = Dict[str, JSONValue]  # Configuration dictionaries\nEnvVars = Dict[str, str]  # Environment variables\nSecretData = Dict[str, str]  # Secret/credential data\nHeadersDict = Dict[str, str]  # HTTP headers\n\n\n# ============================================================================\n# Authentication and Security Types\n# ============================================================================\n\nAuthToken = str  # Authentication token (consider using SecretStr from pydantic)\nAuthCredentials = Dict[str, str]  # Authentication credentials\nAuthContext = Dict[str, JSONValue]  # Authentication context data\n\n\n# ============================================================================\n# Integration-Specific Types\n# ============================================================================\n\n# Ticket/Issue data\nTicketData = Dict[str, JSONValue]  # Ticket/issue data for JIRA, ServiceNow, etc.\nFieldMapping = Dict[str, Union[str, List[str]]]  # Field name mappings\nFieldValue = Union[str, int, float, bool, List[str], None]  # Ticket field values\n\n# SIEM/Security data\nSIEMEvent = Dict[str, JSONValue]  # SIEM event data for Splunk, Sentinel, etc.\nAlertData = Dict[str, JSONValue]  # Security alert data\n\n# Webhook data\nWebhookPayload = Dict[str, JSONValue]  # Webhook payload\nWebhookHeaders = Dict[str, str]  # Webhook request headers\n\n\n# ============================================================================\n# Cache and State Types\n# ============================================================================\n\nCacheKey = str  # Cache key\nCacheValue = JSONValue  # Cached value (prefer more specific types when possible)\nCacheTTL = int  # Cache time-to-live in seconds\n\n\n# ============================================================================\n# Audit and Logging Types\n# ============================================================================\n\nAuditEntry = Dict[str, JSONValue]  # Single audit log entry\nAuditTrail = List[AuditEntry]  # List of audit entries\nLogContext = Dict[str, JSONValue]  # Structured logging context\n\n\n# ============================================================================\n# Error and Exception Types\n# ============================================================================\n\nErrorDetails = Dict[str, JSONValue]  # Error details for exceptions\nErrorContext = Dict[str, JSONValue]  # Additional error context\n\n\n# ============================================================================\n# Validation and Transformation Types\n# ============================================================================\n\nValidationContext = Dict[str, JSONValue]  # Context for validation operations\nTransformFunc = Callable[[Any], Any]  # Generic transformation function\nValidatorFunc = Callable[[Any], bool]  # Generic validator function\n\n\n# ============================================================================\n# Protocol Types for Structural Typing\n# ============================================================================\n\nclass SupportsRedaction(Protocol):\n    \"\"\"Protocol for objects that support value redaction.\"\"\"\n    def redact_value(self, key: str, value: Any) -> Any:\n        \"\"\"Redact sensitive value based on key.\"\"\"\n        ...\n\n\nclass SupportsValidation(Protocol):\n    \"\"\"Protocol for objects that support validation.\"\"\"\n    def validate(self) -> bool:\n        \"\"\"Validate the object.\"\"\"\n        ...\n\n\nclass SupportsAuthentication(Protocol):\n    \"\"\"Protocol for objects that support authentication.\"\"\"\n    async def authenticate(self) -> bool:\n        \"\"\"Perform authentication.\"\"\"\n        ...\n\n\nclass SupportsSerialization(Protocol):\n    \"\"\"Protocol for objects that support JSON serialization.\"\"\"\n    def to_dict(self) -> JSONDict:\n        \"\"\"Convert to dictionary.\"\"\"\n        ...\n\n\n# ============================================================================\n# Generic Type Variables\n# ============================================================================\n\nT = TypeVar('T')  # Generic type variable\nT_co = TypeVar('T_co', covariant=True)  # Covariant type variable\nT_contra = TypeVar('T_contra', contravariant=True)  # Contravariant type variable\n\n# Specific type variables\nModelT = TypeVar('ModelT')  # For Pydantic models\nConfigT = TypeVar('ConfigT')  # For configuration objects\nResponseT = TypeVar('ResponseT')  # For API responses\nEventT = TypeVar('EventT')  # For event types\n\n\n# ============================================================================\n# Pydantic-specific Types\n# ============================================================================\n\n# For Pydantic validator methods\nValidatorValue = Any  # Input value to validator (use with caution, prefer specific types)\nValidatorContext = Any  # Pydantic validation context object\nModelContext = Any  # Pydantic model_post_init __context parameter\n\n\n# ============================================================================\n# Decorator and Wrapper Types\n# ============================================================================\n\n# For function wrappers and decorators\nArgsType = tuple[Any, ...]  # *args tuple\nKwargsType = Dict[str, Any]  # **kwargs dict\nDecoratorFunc = Callable[[Callable[..., T]], Callable[..., T]]  # Function decorator\n",
        "timestamp": "2026-01-04T05:35:58.374613"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "056-reduce-excessive-any-type-usage-in-python-codebase",
        "description": "Found 373 occurrences of ': Any' type annotations across 120+ Python files, with high concentrations in integration-service (16 occurrences), src/core/breakthrough (79 occurrences), and src/core/enhanced_agent_bus (50+ occurrences). Excessive use of 'Any' defeats the purpose of type hints and can mask type-related bugs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-03T19:36:18.355775",
  "last_updated": "2026-01-04T05:35:58.847530"
}