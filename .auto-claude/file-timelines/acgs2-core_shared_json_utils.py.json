{
  "file_path": "acgs2-core/shared/json_utils.py",
  "main_branch_history": [],
  "task_views": {
    "056-reduce-excessive-any-type-usage-in-python-codebase": {
      "task_id": "056-reduce-excessive-any-type-usage-in-python-codebase",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "\"\"\"\nACGS-2 High-Performance JSON Utilities\nConstitutional Hash: cdd01ef066bc6cf2\n\nProvides optimized JSON serialization using orjson for maximum performance.\nIncludes fallbacks for environments where orjson is not available.\n\"\"\"\n\nimport json\nfrom typing import Any, Union\n\ntry:\n    import orjson\n\n    # Use orjson for maximum performance\n    def dumps(obj: Any, *, default=None, option=None, **kwargs) -> str:\n        \"\"\"Fast JSON serialization using orjson.\"\"\"\n        try:\n            if default:\n                return orjson.dumps(obj, default=default, option=option).decode('utf-8')\n            return orjson.dumps(obj, option=option).decode('utf-8')\n        except (TypeError, ValueError):\n            # Fallback to standard json for complex objects\n            return json.dumps(obj, default=str, **kwargs)\n\n    def loads(s: Union[str, bytes], **kwargs) -> Any:\n        \"\"\"Fast JSON deserialization using orjson.\"\"\"\n        try:\n            if isinstance(s, str):\n                s = s.encode('utf-8')\n            return orjson.loads(s)\n        except (orjson.JSONDecodeError, UnicodeDecodeError):\n            # Fallback to standard json\n            if isinstance(s, bytes):\n                s = s.decode('utf-8')\n            return json.loads(s, **kwargs)\n\nexcept ImportError:\n    # Fallback to standard library json\n    def dumps(obj: Any, *, default=None, option=None, **kwargs) -> str:\n        \"\"\"Standard JSON serialization when orjson unavailable.\"\"\"\n        return json.dumps(obj, default=default or str, **kwargs)\n\n    def loads(s: Union[str, bytes], **kwargs) -> Any:\n        \"\"\"Standard JSON deserialization when orjson unavailable.\"\"\"\n        if isinstance(s, bytes):\n            s = s.decode('utf-8')\n        return json.loads(s, **kwargs)\n\n\n# Convenience functions for common use cases\ndef dump_bytes(obj: Any) -> bytes:\n    \"\"\"Serialize to JSON bytes (orjson optimized).\"\"\"\n    try:\n        import orjson\n        return orjson.dumps(obj)\n    except ImportError:\n        return json.dumps(obj, default=str).encode('utf-8')\n\n\ndef dump_compact(obj: Any) -> str:\n    \"\"\"Serialize to compact JSON string (no whitespace).\"\"\"\n    try:\n        import orjson\n        return orjson.dumps(obj, option=orjson.OPT_NON_STR_KEYS).decode('utf-8')\n    except ImportError:\n        return json.dumps(obj, separators=(',', ':'), default=str)\n\n\ndef dump_pretty(obj: Any, indent: int = 2) -> str:\n    \"\"\"Serialize to pretty-printed JSON string.\"\"\"\n    return json.dumps(obj, indent=indent, default=str)\n",
        "timestamp": "2026-01-04T05:35:58.374613"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "056-reduce-excessive-any-type-usage-in-python-codebase",
        "description": "Found 373 occurrences of ': Any' type annotations across 120+ Python files, with high concentrations in integration-service (16 occurrences), acgs2-core/breakthrough (79 occurrences), and acgs2-core/enhanced_agent_bus (50+ occurrences). Excessive use of 'Any' defeats the purpose of type hints and can mask type-related bugs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-03T19:36:18.111383",
  "last_updated": "2026-01-04T05:35:58.733528"
}