{
  "file_path": "src/core/services/core/code-analysis/code_analysis_service/app/utils/logging.py",
  "main_branch_history": [],
  "task_views": {
    "056-reduce-excessive-any-type-usage-in-python-codebase": {
      "task_id": "056-reduce-excessive-any-type-usage-in-python-codebase",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "\"\"\"\nACGS Code Analysis Engine - Structured Logging Utilities\nProvides structured logging with constitutional compliance.\n\nConstitutional Hash: cdd01ef066bc6cf2\n\"\"\"\n\nimport logging\nimport sys\nfrom typing import Any, Optional\n\nCONSTITUTIONAL_HASH = \"cdd01ef066bc6cf2\"\n\n\nclass ConstitutionalFormatter(logging.Formatter):\n    \"\"\"Custom formatter that includes constitutional hash.\"\"\"\n\n    def format(self, record: logging.LogRecord) -> str:\n        if not hasattr(record, \"constitutional_hash\"):\n            record.constitutional_hash = CONSTITUTIONAL_HASH\n        return super().format(record)\n\n\ndef get_logger(name: str, level: int = logging.INFO) -> logging.Logger:\n    \"\"\"Get a configured logger with constitutional compliance.\"\"\"\n    logger = logging.getLogger(name)\n\n    if not logger.handlers:\n        handler = logging.StreamHandler(sys.stdout)\n        handler.setLevel(level)\n\n        formatter = ConstitutionalFormatter(\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\")\n        handler.setFormatter(formatter)\n        logger.addHandler(handler)\n\n    logger.setLevel(level)\n    return logger\n\n\ndef performance_logger(name: str = \"performance\") -> logging.Logger:\n    \"\"\"Get a logger for performance metrics.\"\"\"\n    return get_logger(f\"acgs.{name}\")\n\n\ndef log_api_request(\n    method: str,\n    path: str,\n    user_id: Optional[str] = None,\n    request_id: Optional[str] = None,\n    **kwargs: Any,\n) -> None:\n    \"\"\"Log an API request.\"\"\"\n    logger = get_logger(\"api.request\")\n    logger.info(\n        f\"API Request: {method} {path}\",\n        extra={\n            \"method\": method,\n            \"path\": path,\n            \"user_id\": user_id,\n            \"request_id\": request_id,\n            \"constitutional_hash\": CONSTITUTIONAL_HASH,\n            **kwargs,\n        },\n    )\n\n\ndef log_api_response(\n    method: str,\n    path: str,\n    status_code: int,\n    duration_ms: float,\n    user_id: Optional[str] = None,\n    request_id: Optional[str] = None,\n    **kwargs: Any,\n) -> None:\n    \"\"\"Log an API response.\"\"\"\n    logger = get_logger(\"api.response\")\n    logger.info(\n        f\"API Response: {method} {path} - {status_code} ({duration_ms:.2f}ms)\",\n        extra={\n            \"method\": method,\n            \"path\": path,\n            \"status_code\": status_code,\n            \"duration_ms\": duration_ms,\n            \"user_id\": user_id,\n            \"request_id\": request_id,\n            \"constitutional_hash\": CONSTITUTIONAL_HASH,\n            **kwargs,\n        },\n    )\n",
        "timestamp": "2026-01-04T05:35:58.374613"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "056-reduce-excessive-any-type-usage-in-python-codebase",
        "description": "Found 373 occurrences of ': Any' type annotations across 120+ Python files, with high concentrations in integration-service (16 occurrences), src/core/breakthrough (79 occurrences), and src/core/enhanced_agent_bus (50+ occurrences). Excessive use of 'Any' defeats the purpose of type hints and can mask type-related bugs.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-03T19:36:18.302501",
  "last_updated": "2026-01-04T05:35:58.717863"
}