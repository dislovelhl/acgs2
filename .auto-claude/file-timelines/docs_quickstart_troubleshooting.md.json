{
  "file_path": "docs/quickstart/troubleshooting.md",
  "main_branch_history": [],
  "task_views": {
    "060-document-error-codes-and-troubleshooting-for-commo": {
      "task_id": "060-document-error-codes-and-troubleshooting-for-commo",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "# ACGS-2 Troubleshooting Guide\n\n<!-- Constitutional Hash: cdd01ef066bc6cf2 -->\n\n> **Version**: 1.1.0\n> **Last Updated**: 2025-01-03\n> **Purpose**: Comprehensive troubleshooting for common ACGS-2 issues\n\n## Table of Contents\n\n1. [Quick Diagnostics](#quick-diagnostics)\n2. [Docker and Container Issues](#docker-and-container-issues)\n3. [OPA (Policy Engine) Issues](#opa-policy-engine-issues)\n4. [Agent Bus Issues](#agent-bus-issues)\n5. [Redis Issues](#redis-issues)\n6. [Kafka Issues](#kafka-issues)\n7. [Network and Port Issues](#network-and-port-issues)\n8. [Policy and Rego Issues](#policy-and-rego-issues)\n9. [Configuration Issues](#configuration-issues)\n10. [Platform-Specific Issues](#platform-specific-issues)\n11. [Performance Issues](#performance-issues)\n12. [Getting Help](#getting-help)\n\n---\n\n## Quick Diagnostics\n\n### Automated Health Check\n\nRun this comprehensive diagnostic script to quickly identify issues:\n\n```bash\n#!/bin/bash\n# ACGS-2 Diagnostic Script\n# Save as: diagnose.sh\n# Run with: bash diagnose.sh\n\nset -e\n\necho \"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\"\necho \"\u2551               ACGS-2 Diagnostic Report                           \u2551\"\necho \"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\"\necho \"\"\necho \"Generated: $(date)\"\necho \"\"\n\n# Function to check service\ncheck_service() {\n    local name=$1\n    local url=$2\n    local expected=$3\n\n    printf \"%-20s\" \"$name:\"\n    if response=$(curl -s -o /dev/null -w \"%{http_code}\" \"$url\" 2>/dev/null); then\n        if [ \"$response\" == \"$expected\" ]; then\n            echo \"\u2705 OK (HTTP $response)\"\n            return 0\n        else\n            echo \"\u26a0\ufe0f  Unexpected (HTTP $response)\"\n            return 1\n        fi\n    else\n        echo \"\u274c Not responding\"\n        return 1\n    fi\n}\n\necho \"=== Docker Status ===\"\nif docker info > /dev/null 2>&1; then\n    echo \"Docker daemon:      \u2705 Running\"\n    echo \"Docker version:     $(docker --version | cut -d' ' -f3 | tr -d ',')\"\n    echo \"Compose version:    $(docker compose version --short 2>/dev/null || echo 'N/A')\"\nelse\n    echo \"Docker daemon:      \u274c Not running\"\n    echo \"\"\n    echo \"FIX: Start Docker Desktop or run 'sudo systemctl start docker'\"\n    exit 1\nfi\n\necho \"\"\necho \"=== Container Status ===\"\ndocker compose -f docker-compose.dev.yml ps --format \"table {{.Service}}\\t{{.Status}}\\t{{.Ports}}\" 2>/dev/null || echo \"No containers found\"\n\necho \"\"\necho \"=== Service Health ===\"\ncheck_service \"OPA\" \"http://localhost:8181/health\" \"200\" || true\ncheck_service \"Agent Bus\" \"http://localhost:8000/health\" \"200\" || true\ncheck_service \"API Gateway\" \"http://localhost:8080/health\" \"200\" || true\n\necho \"\"\necho \"=== Port Availability ===\"\nfor port in 8181 8000 8080 6379 19092 2181; do\n    if lsof -i :$port > /dev/null 2>&1; then\n        printf \"Port %-5s: \u2705 In use\\n\" \"$port\"\n    else\n        printf \"Port %-5s: \u26a0\ufe0f  Not bound\\n\" \"$port\"\n    fi\ndone\n\necho \"\"\necho \"=== Resource Usage ===\"\ndocker stats --no-stream --format \"table {{.Name}}\\t{{.CPUPerc}}\\t{{.MemUsage}}\" 2>/dev/null || echo \"No stats available\"\n\necho \"\"\necho \"=== Recent Errors (last 10 lines per service) ===\"\nfor service in opa redis kafka agent-bus api-gateway; do\n    echo \"--- $service ---\"\n    docker compose -f docker-compose.dev.yml logs --tail=10 \"$service\" 2>/dev/null | grep -i \"error\\|fail\\|exception\" | tail -5 || echo \"No errors found\"\ndone\n\necho \"\"\necho \"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\"\necho \"\u2551                    Diagnostic Complete                           \u2551\"\necho \"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\"\n```\n\n### Quick Status Check\n\nFor a quick status check, run:\n\n```bash\n# Check if all containers are running\ndocker compose -f docker-compose.dev.yml ps\n\n# Check service health\ncurl -s http://localhost:8181/health && echo \"OPA: OK\"\ncurl -s http://localhost:8000/health && echo \"Agent Bus: OK\"\n```\n\n---\n\n## Docker and Container Issues\n\n### Docker Daemon Not Running\n\n**Symptoms:**\n- `Cannot connect to the Docker daemon`\n- `Error response from daemon: Bad response from Docker engine`\n\n**Solutions:**\n\n```bash\n# Linux\nsudo systemctl start docker\nsudo systemctl enable docker  # Start on boot\n\n# macOS / Windows\n# Open Docker Desktop application\n\n# Verify Docker is running\ndocker info\n```\n\n### Container Fails to Start\n\n**Symptoms:**\n- Container status shows \"Exited\" or \"Restarting\"\n- Health check fails\n\n**Diagnosis:**\n\n```bash\n# Check container logs\ndocker compose -f docker-compose.dev.yml logs <service-name>\n\n# Check container status\ndocker compose -f docker-compose.dev.yml ps\n\n# Inspect container\ndocker inspect <container-id>\n```\n\n**Common Causes and Fixes:**\n\n| Cause | Fix |\n|-------|-----|\n| Missing environment variables | Check `.env` file exists and is complete |\n| Port conflict | Change ports in `.env` or stop conflicting service |\n| Volume mount error | Check paths exist and have correct permissions |\n| Image not found | Run `docker compose pull` to update images |\n| Out of memory | Increase Docker memory allocation |\n\n### Container Keeps Restarting\n\n**Diagnosis:**\n\n```bash\n# Watch container logs in real-time\ndocker compose -f docker-compose.dev.yml logs -f <service-name>\n\n# Check restart count\ndocker inspect --format='{{.RestartCount}}' <container-id>\n\n# Check exit code\ndocker inspect --format='{{.State.ExitCode}}' <container-id>\n```\n\n**Common Exit Codes:**\n\n| Exit Code | Meaning | Solution |\n|-----------|---------|----------|\n| 0 | Normal exit | Check if service should stay running |\n| 1 | Application error | Check logs for error message |\n| 137 | OOM killed | Increase memory allocation |\n| 143 | SIGTERM received | Check if another process is killing it |\n\n### Image Pull Failures\n\n**Symptoms:**\n- `Error pulling image`\n- `manifest unknown`\n\n**Solutions:**\n\n```bash\n# Check internet connection\nping hub.docker.com\n\n# Manually pull images\ndocker pull openpolicyagent/opa:latest\ndocker pull redis:7-alpine\ndocker pull confluentinc/cp-kafka:7.4.0\n\n# If behind proxy, configure Docker proxy\n# Edit ~/.docker/config.json\n```\n\n---\n\n## OPA (Policy Engine) Issues\n\n### OPA Not Responding\n\n**Symptoms:**\n- `Connection refused` when querying http://localhost:8181\n- `curl: (7) Failed to connect to localhost port 8181`\n\n**Diagnosis:**\n\n```bash\n# Check if OPA container is running\ndocker compose -f docker-compose.dev.yml ps opa\n\n# Check OPA logs\ndocker compose -f docker-compose.dev.yml logs opa\n\n# Test from inside Docker network\ndocker exec -it acgs2-agent-bus-1 curl http://opa:8181/health\n```\n\n**Solutions:**\n\n```bash\n# Restart OPA\ndocker compose -f docker-compose.dev.yml restart opa\n\n# If policies are corrupt, rebuild\ndocker compose -f docker-compose.dev.yml down\ndocker compose -f docker-compose.dev.yml up -d opa\n\n# Check policy volume mount\ndocker compose -f docker-compose.dev.yml exec opa ls -la /policies\n```\n\n### Policy Query Returns `undefined`\n\n**Symptoms:**\n- Query returns `{\"result\": undefined}` or empty result\n- No error message but no decision\n\n**Common Causes:**\n\n1. **Wrong policy path**\n   ```bash\n   # List available policies\n   curl -s http://localhost:8181/v1/policies | python3 -m json.tool\n\n   # Correct path format: package.name/rule\n   # If package is \"acgs.constitutional\" and rule is \"allow\"\n   # Query: /v1/data/acgs/constitutional/allow\n   ```\n\n2. **Missing input**\n   ```bash\n   # Wrong: no input wrapper\n   curl -X POST http://localhost:8181/v1/data/acgs/constitutional/allow \\\n     -d '{\"constitutional_hash\": \"xyz\"}'\n\n   # Correct: input wrapper required\n   curl -X POST http://localhost:8181/v1/data/acgs/constitutional/allow \\\n     -d '{\"input\": {\"constitutional_hash\": \"xyz\"}}'\n   ```\n\n3. **Policy not loaded**\n   ```bash\n   # Check if policy file is in volume\n   docker exec -it acgs2-opa-1 cat /policies/constitutional.rego\n   ```\n\n### Policy Syntax Errors\n\n**Symptoms:**\n- OPA fails to start\n- `rego_parse_error` in logs\n\n**Diagnosis:**\n\n```bash\n# Validate policy syntax\ndocker run --rm -v $(pwd)/policies:/policies openpolicyagent/opa:latest check /policies/\n\n# Or use the built-in OPA test\ndocker run --rm -v $(pwd)/policies:/policies openpolicyagent/opa:latest test /policies/\n```\n\n**Common Syntax Issues:**\n\n| Issue | Example | Fix |\n|-------|---------|-----|\n| Missing package | `allow { ... }` | Add `package mypolicy` at top |\n| Wrong assignment | `allow = true` | Use `allow := true` for rules |\n| Unclosed brace | `allow { input.x` | Add closing `}` |\n| String in rule body | `allow { \"yes\" }` | Use boolean: `allow { true }` |\n\n### OPA High Memory Usage\n\n**Symptoms:**\n- OPA container using excessive memory\n- OOM kills\n\n**Solutions:**\n\n```bash\n# Check memory usage\ndocker stats acgs2-opa-1\n\n# Limit OPA memory in docker-compose\n# Add to opa service:\n#   mem_limit: 512m\n#   memswap_limit: 512m\n\n# Clear OPA decision cache\ncurl -X DELETE http://localhost:8181/v1/data/system/bundles\n```\n\n---\n\n## Agent Bus Issues\n\n### Agent Bus Not Starting\n\n**Symptoms:**\n- Agent Bus container exits immediately\n- Port 8000 not accessible\n\n**Diagnosis:**\n\n```bash\n# Check logs for Python errors\ndocker compose -f docker-compose.dev.yml logs agent-bus\n\n# Common issues:\n# - ImportError: module not found\n# - Environment variable missing\n# - Port already in use\n```\n\n**Solutions:**\n\n```bash\n# Ensure dependencies are satisfied\ndocker compose -f docker-compose.dev.yml up -d opa redis kafka\n\n# Check environment variables\ndocker compose -f docker-compose.dev.yml config | grep agent-bus -A 30\n\n# Rebuild if code changed\ndocker compose -f docker-compose.dev.yml build agent-bus\ndocker compose -f docker-compose.dev.yml up -d agent-bus\n```\n\n### Constitutional Validation Failing\n\n**Symptoms:**\n- All requests return `false` or rejected\n- Logs show \"Constitutional hash mismatch\"\n\n**Fix:**\n\n```bash\n# Verify constitutional hash in .env\ngrep CONSTITUTIONAL_HASH .env\n\n# Should be: CONSTITUTIONAL_HASH=cdd01ef066bc6cf2\n\n# If wrong, fix and restart\necho \"CONSTITUTIONAL_HASH=cdd01ef066bc6cf2\" >> .env\ndocker compose -f docker-compose.dev.yml restart agent-bus\n```\n\n### Connection to OPA Failing\n\n**Symptoms:**\n- Agent Bus logs show OPA connection errors\n- Governance decisions failing\n\n**Diagnosis:**\n\n```bash\n# Check Agent Bus can reach OPA\ndocker exec -it acgs2-agent-bus-1 curl http://opa:8181/health\n\n# Check environment variable\ndocker exec -it acgs2-agent-bus-1 env | grep OPA_URL\n```\n\n**Fix:**\n\n```bash\n# Ensure OPA_URL uses Docker network name (not localhost)\n# In .env:\nOPA_URL=http://opa:8181  # Correct for Docker\n# NOT: OPA_URL=http://localhost:8181\n```\n\n---\n\n## Redis Issues\n\n### Redis Connection Refused\n\n**Symptoms:**\n- `ConnectionRefusedError: Redis`\n- `Could not connect to Redis`\n\n**Diagnosis:**\n\n```bash\n# Check Redis is running\ndocker compose -f docker-compose.dev.yml ps redis\n\n# Test Redis connection\ndocker exec -it acgs2-redis-1 redis-cli -a dev_password ping\n```\n\n**Solutions:**\n\n```bash\n# Restart Redis\ndocker compose -f docker-compose.dev.yml restart redis\n\n# Check Redis logs\ndocker compose -f docker-compose.dev.yml logs redis\n\n# Verify password matches\ngrep REDIS_PASSWORD .env\n```\n\n### Redis Authentication Failed\n\n**Symptoms:**\n- `NOAUTH Authentication required`\n- `invalid password`\n\n**Fix:**\n\n```bash\n# Ensure password is consistent\n# In .env:\nREDIS_PASSWORD=dev_password\nREDIS_URL=redis://:dev_password@redis:6379/0\n\n# Restart all services\ndocker compose -f docker-compose.dev.yml down\ndocker compose -f docker-compose.dev.yml up -d\n```\n\n---\n\n## Kafka Issues\n\n### Kafka Not Ready\n\n**Symptoms:**\n- `Kafka broker not available`\n- Messages not being published\n\n**Diagnosis:**\n\n```bash\n# Check Kafka and Zookeeper status\ndocker compose -f docker-compose.dev.yml ps kafka zookeeper\n\n# Check Kafka logs\ndocker compose -f docker-compose.dev.yml logs kafka\n\n# List topics\ndocker exec -it acgs2-kafka-1 kafka-topics --list --bootstrap-server localhost:19092\n```\n\n**Solutions:**\n\n```bash\n# Restart Kafka (and Zookeeper)\ndocker compose -f docker-compose.dev.yml restart zookeeper kafka\n\n# If corrupt, recreate\ndocker compose -f docker-compose.dev.yml down -v\ndocker compose -f docker-compose.dev.yml up -d\n```\n\n### Kafka Connection From Host\n\n**Note:** Kafka uses different listeners for internal (Docker) and external (host) access.\n\n```bash\n# From host machine:\nKAFKA_BOOTSTRAP=localhost:19092\n\n# From inside Docker container:\nKAFKA_BOOTSTRAP=kafka:29092\n```\n\n---\n\n## Network and Port Issues\n\n### Port Already in Use\n\n**Symptoms:**\n- `Bind for 0.0.0.0:8181 failed: port is already allocated`\n\n**Diagnosis:**\n\n```bash\n# Find what's using the port\n# Linux/macOS:\nlsof -i :8181\nnetstat -tulpn | grep 8181\n\n# Windows:\nnetstat -ano | findstr 8181\n```\n\n**Solutions:**\n\n```bash\n# Option 1: Stop the conflicting service\nkill <pid>  # Linux/macOS\ntaskkill /PID <pid> /F  # Windows\n\n# Option 2: Change the port in .env\n# Add to .env:\nOPA_PORT=8182\n\n# Update docker-compose.dev.yml to use the variable\n# ports:\n#   - \"${OPA_PORT:-8181}:8181\"\n```\n\n### Cannot Access Services from Host\n\n**Symptoms:**\n- Services work inside Docker but not from host\n- `Connection refused` from browser\n\n**Diagnosis:**\n\n```bash\n# Check port bindings\ndocker compose -f docker-compose.dev.yml port opa 8181\n\n# Test from inside container\ndocker exec -it acgs2-agent-bus-1 curl http://opa:8181/health\n```\n\n**Solutions:**\n\n```bash\n# Ensure ports are exposed in docker-compose\n# ports:\n#   - \"8181:8181\"  # Host:Container\n\n# Check firewall (Linux)\nsudo ufw allow 8181\n```\n\n---\n\n## Policy and Rego Issues\n\n### Rego Compilation Errors\n\n**Common Errors and Fixes:**\n\n| Error | Cause | Fix |\n|-------|-------|-----|\n| `rego_parse_error: unexpected token` | Syntax error | Check braces, quotes, operators |\n| `rego_type_error: undefined ref` | Missing import | Add `import rego.v1` or check path |\n| `rego_unsafe_var_error` | Unbound variable | Ensure variable is defined |\n\n**Validate Before Deploying:**\n\n```bash\n# Check syntax\ndocker run --rm -v $(pwd)/policies:/policies \\\n  openpolicyagent/opa:latest check /policies/\n\n# Run tests\ndocker run --rm -v $(pwd)/policies:/policies \\\n  openpolicyagent/opa:latest test /policies/\n\n# Format policies\ndocker run --rm -v $(pwd)/policies:/policies \\\n  openpolicyagent/opa:latest fmt -w /policies/\n```\n\n### Policy Returns Wrong Result\n\n**Debugging Steps:**\n\n```bash\n# 1. Enable trace\ncurl -X POST http://localhost:8181/v1/data/acgs/constitutional/allow?explain=full \\\n  -d '{\"input\": {\"constitutional_hash\": \"xyz\"}}' | python3 -m json.tool\n\n# 2. Check intermediate values\ncurl -X POST http://localhost:8181/v1/data/acgs/constitutional \\\n  -d '{\"input\": {\"constitutional_hash\": \"xyz\"}}' | python3 -m json.tool\n\n# 3. Use OPA playground for testing\n# https://play.openpolicyagent.org/\n```\n\n---\n\n## Configuration Issues\n\n### Missing Environment Variables\n\n**Symptoms:**\n- `ValidationError: field required`\n- Service fails to start with config error\n\n**Diagnosis:**\n\n```bash\n# Check what's in .env\ncat .env\n\n# Check what Docker Compose sees\ndocker compose -f docker-compose.dev.yml config\n\n# Check inside container\ndocker exec -it acgs2-agent-bus-1 env\n```\n\n**Fix:**\n\n```bash\n# Reset to defaults\ncp .env.dev .env\n\n# Or add missing variables\ncat >> .env << EOF\nREDIS_URL=redis://redis:6379/0\nOPA_URL=http://opa:8181\nCONSTITUTIONAL_HASH=cdd01ef066bc6cf2\nEOF\n```\n\n### Wrong URL Scheme (Docker vs Host)\n\n**Problem:** Using `localhost` inside Docker containers.\n\n| Context | Use |\n|---------|-----|\n| Host machine | `http://localhost:8181` |\n| Inside Docker | `http://opa:8181` |\n| docker-compose.yml | `http://opa:8181` |\n| From browser | `http://localhost:8181` |\n\n---\n\n## Platform-Specific Issues\n\n> **See Also:** For comprehensive cross-platform testing and verification, refer to\n> [Cross-Platform Testing Guide](../cross-platform-testing.md) and run\n> `./scripts/cross-platform-test.sh` to validate your environment.\n\n### Windows Issues\n\n**WSL2 Recommended:**\n\n```powershell\n# Enable WSL2\nwsl --install\n\n# Use WSL2 backend in Docker Desktop\n# Settings > General > Use the WSL 2 based engine\n```\n\n**Path Issues:**\n\n```bash\n# Use Unix-style paths in WSL2\ncd /mnt/c/Users/yourname/projects/acgs2\n\n# Or use Windows paths in PowerShell\ncd C:\\Users\\yourname\\projects\\acgs2\n```\n\n**Line Ending Issues:**\n\n```bash\n# Configure Git to use LF\ngit config --global core.autocrlf input\n\n# Fix existing files\ndos2unix .env\n```\n\n### macOS Issues\n\n**Docker Desktop Memory:**\n\n```bash\n# Increase memory allocation\n# Docker Desktop > Settings > Resources > Memory: 4GB+\n```\n\n**Port 8000 Conflict:**\n\n```bash\n# Check what's using port 8000\nlsof -i :8000\n\n# Common culprits: Airplay Receiver\n# Disable in System Preferences > Sharing > Airplay Receiver\n```\n\n### Linux Issues\n\n**Docker Permission Denied:**\n\n```bash\n# Add user to docker group\nsudo usermod -aG docker $USER\n\n# Log out and back in, or:\nnewgrp docker\n```\n\n**SELinux Issues:**\n\n```bash\n# If using SELinux, add :Z to volume mounts\n# volumes:\n#   - ./policies:/policies:ro,Z\n```\n\n---\n\n## Performance Issues\n\n### Slow Policy Evaluation\n\n**Diagnosis:**\n\n```bash\n# Measure query time\ntime curl -s -X POST http://localhost:8181/v1/data/acgs/constitutional/allow \\\n  -d '{\"input\": {\"constitutional_hash\": \"cdd01ef066bc6cf2\", \"tenant_id\": \"t1\", \"features\": []}}' > /dev/null\n\n# Check OPA metrics\ncurl -s http://localhost:8181/metrics | grep opa_\n```\n\n**Optimizations:**\n\n- Use partial evaluation for complex policies\n- Enable decision caching\n- Reduce policy complexity\n- Use indexed rules\n\n### High Memory Usage\n\n**Diagnosis:**\n\n```bash\n# Check container stats\ndocker stats --no-stream\n\n# Check specific container\ndocker exec -it acgs2-agent-bus-1 ps aux\n```\n\n**Solutions:**\n\n```bash\n# Limit container memory\n# In docker-compose.dev.yml:\nservices:\n  agent-bus:\n    mem_limit: 512m\n\n# Clear caches\ncurl -X DELETE http://localhost:8181/v1/data/system/bundles\n```\n\n---\n\n## Getting Help\n\n### Log Collection\n\nBefore asking for help, collect these logs:\n\n```bash\n# Collect all logs\ndocker compose -f docker-compose.dev.yml logs > acgs2_logs.txt 2>&1\n\n# Collect diagnostic info\nbash diagnose.sh > diagnostic_report.txt 2>&1\n\n# Include configuration (remove secrets!)\ndocker compose -f docker-compose.dev.yml config > compose_config.txt\n```\n\n### Where to Get Help\n\n| Resource | When to Use |\n|----------|-------------|\n| [GitHub Issues](https://github.com/ACGS-Project/ACGS-2/issues) | Bug reports, feature requests |\n| [Community Forum](https://forum.acgs2.org) | General questions, discussions |\n| [Stack Overflow](https://stackoverflow.com/questions/tagged/acgs2) | Specific technical questions |\n| [Enterprise Support](mailto:enterprise@acgs2.org) | Production issues, SLA support |\n\n### Issue Template\n\nWhen reporting issues, include:\n\n```markdown\n## Environment\n- OS: [e.g., Ubuntu 22.04, macOS 14, Windows 11]\n- Docker version: [output of `docker --version`]\n- Docker Compose version: [output of `docker compose version`]\n\n## Description\n[Clear description of the issue]\n\n## Steps to Reproduce\n1. [First step]\n2. [Second step]\n3. [See error]\n\n## Expected Behavior\n[What you expected to happen]\n\n## Actual Behavior\n[What actually happened]\n\n## Logs\n```\n[Relevant log output]\n```\n\n## Screenshots\n[If applicable]\n```\n\n---\n\n## Appendix: Error Reference\n\n### Exit Codes\n\n| Code | Name | Description |\n|------|------|-------------|\n| 0 | SUCCESS | Normal exit |\n| 1 | GENERAL | General error |\n| 2 | MISUSE | Shell command misuse |\n| 126 | CANNOTEXEC | Command cannot execute |\n| 127 | NOTFOUND | Command not found |\n| 128+N | SIGNAL | Killed by signal N |\n| 137 | SIGKILL | OOM or manual kill |\n| 143 | SIGTERM | Graceful termination |\n\n### HTTP Status Codes\n\n| Code | Meaning | ACGS-2 Context |\n|------|---------|----------------|\n| 200 | OK | Request successful |\n| 400 | Bad Request | Invalid input |\n| 401 | Unauthorized | Auth required |\n| 403 | Forbidden | Policy denied |\n| 404 | Not Found | Policy/resource missing |\n| 429 | Too Many Requests | Rate limited |\n| 500 | Server Error | Internal error |\n| 502 | Bad Gateway | Service unavailable |\n| 503 | Service Unavailable | OPA/Agent Bus down |\n\n---\n\n**Constitutional Hash**: `cdd01ef066bc6cf2`\n**Version**: 1.0.0\n**Last Updated**: 2025-01-02\n",
        "timestamp": "2026-01-04T05:35:51.134105"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "060-document-error-codes-and-troubleshooting-for-commo",
        "description": "The codebase has 13 TODO/FIXME comments across critical files including webhooks.py, approval_chain_engine.py, and config_validator.py. Additionally, there's no centralized documentation for error codes, failure modes, or troubleshooting guides. Users encountering errors have no reference for resolution.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-03T19:36:08.635515",
  "last_updated": "2026-01-04T05:35:51.207953"
}