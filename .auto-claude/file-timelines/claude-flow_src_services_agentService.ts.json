{
  "file_path": "claude-flow/src/services/agentService.ts",
  "main_branch_history": [],
  "task_views": {
    "059-add-jsdoc-coverage-for-claude-flow-typescript-serv": {
      "task_id": "059-add-jsdoc-coverage-for-claude-flow-typescript-serv",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "import { spawn } from \"child_process\";\nimport * as path from \"path\";\nimport * as fs from \"fs\";\nimport logger from \"../utils/logger.js\";\n\nexport interface AgentSpawnOptions {\n  name: string;\n  type: string;\n  skills: string[];\n}\n\nexport interface AgentSpawnResult {\n  success: boolean;\n  agentId?: string;\n  error?: string;\n}\n\nexport async function spawnAgent(\n  options: AgentSpawnOptions\n): Promise<AgentSpawnResult> {\n  try {\n    // Path to the Python spawner script\n    // Use src path for development, fallback to dist for production\n    let spawnerPath = path.join(__dirname, \"agentSpawner.py\");\n    if (!require(\"fs\").existsSync(spawnerPath)) {\n      // Try the src path from dist\n      spawnerPath = path.join(__dirname, \"../../src/services/agentSpawner.py\");\n    }\n\n    // Prepare arguments for the Python script\n    const args = [\n      spawnerPath,\n      options.name,\n      options.type,\n      JSON.stringify(options.skills),\n    ];\n\n    // Spawn the Python process\n    const result = await runPythonScript(args);\n\n    if (result.success) {\n      return {\n        success: true,\n        agentId: result.agentId,\n      };\n    } else {\n      return {\n        success: false,\n        error: result.error,\n      };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : \"Unknown error occurred\",\n    };\n  }\n}\n\nasync function runPythonScript(args: string[]): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const pythonProcess = spawn(\"python3\", args, {\n      stdio: [\"pipe\", \"pipe\", \"pipe\"],\n      cwd: path.dirname(args[0]),\n    });\n\n    let stdout = \"\";\n    let stderr = \"\";\n\n    pythonProcess.stdout.on(\"data\", (data) => {\n      stdout += data.toString();\n    });\n\n    pythonProcess.stderr.on(\"data\", (data) => {\n      stderr += data.toString();\n    });\n\n    pythonProcess.on(\"close\", (code) => {\n      if (code === 0) {\n        try {\n          const result = JSON.parse(stdout.trim());\n          resolve(result);\n        } catch (e) {\n          reject(new Error(`Failed to parse Python output: ${stdout}`));\n        }\n      } else {\n        reject(new Error(`Python script failed with code ${code}: ${stderr}`));\n      }\n    });\n\n    pythonProcess.on(\"error\", (error) => {\n      reject(error);\n    });\n  });\n}\n\nexport async function listAgents(): Promise<any[]> {\n  try {\n    // Path to the Python agent list script\n    let listPath = path.join(__dirname, \"agentList.py\");\n    if (!require(\"fs\").existsSync(listPath)) {\n      // Try the src path from dist\n      listPath = path.join(__dirname, \"../../src/services/agentList.py\");\n    }\n\n    // Run the Python script to get agent list\n    const result = await runPythonScript([listPath]);\n\n    if (result.success) {\n      return result.agents || [];\n    }\n    if (result.error) {\n      logger.warn({ error: result.error }, \"Failed to list agents\");\n      return [];\n    }\n  } catch (error) {\n    console.warn(\"Error listing agents:\", error);\n    return [];\n  }\n}\n\nexport interface AgentRemovalResult {\n  success: boolean;\n  agentId?: string;\n  message?: string;\n  error?: string;\n}\n\nexport async function removeAgent(\n  agentId: string\n): Promise<AgentRemovalResult> {\n  try {\n    // Path to the Python agent remover script\n    // Use src path for development, fallback to dist for production\n    let removerPath = path.join(__dirname, \"agentRemover.py\");\n    if (!require(\"fs\").existsSync(removerPath)) {\n      // Try the src path from dist\n      removerPath = path.join(__dirname, \"../../src/services/agentRemover.py\");\n    }\n\n    // Prepare arguments for the Python script\n    const args = [removerPath, agentId];\n\n    // Run the Python script to remove the agent\n    const result = await runPythonScript(args);\n\n    if (result.success) {\n      return {\n        success: true,\n        agentId: result.agentId,\n        message: result.message,\n      };\n    } else {\n      return {\n        success: false,\n        error: result.error,\n      };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : \"Unknown error occurred\",\n    };\n  }\n}\n",
        "timestamp": "2026-01-04T05:35:52.969195"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "Add JSDoc coverage for claude-flow TypeScript service public exports",
        "description": "Add comprehensive JSDoc documentation to the 45 exported functions/classes across 17 TypeScript files in the claude-flow CLI tool to improve API documentation for enterprise users",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-04T05:35:53.064893",
  "last_updated": "2026-01-04T05:35:53.071651"
}