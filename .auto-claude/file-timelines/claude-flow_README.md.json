{
  "file_path": "claude-flow/README.md",
  "main_branch_history": [],
  "task_views": {
    "059-add-jsdoc-coverage-for-claude-flow-typescript-serv": {
      "task_id": "059-add-jsdoc-coverage-for-claude-flow-typescript-serv",
      "branch_point": {
        "commit_hash": "fc6e42927298263034acf989773f3200e422ad17",
        "content": "# Claude Flow\n\nA CLI tool for managing ACGS-2 agent swarms with constitutional governance.\n\n## Installation\n\n```bash\nnpm install -g claude-flow\n# or\nnpx claude-flow\n```\n\n## Prerequisites\n\n- Node.js 16+\n- Python 3.8+\n- ACGS-2 core system installed and accessible\n- Redis 6.0+ (required for persistent memory feature)\n\n## Environment Variables\n\nConfigure the following environment variables for persistent memory:\n\n| Variable | Required | Default | Description |\n|----------|----------|---------|-------------|\n| `REDIS_URL` | No | `redis://localhost:6379` | Redis connection URL. Use `redis://` for development, `rediss://` for production (TLS) |\n| `REDIS_PASSWORD` | Production | - | Redis authentication password (required for production environments) |\n| `MEMORY_DEFAULT_TTL_SECONDS` | No | `86400` | Default time-to-live for memory entries (24 hours) |\n| `MEMORY_MAX_RECONNECT_ATTEMPTS` | No | `10` | Maximum reconnection attempts before failure |\n| `MEMORY_KEY_PREFIX` | No | `claude-flow:` | Prefix for all Redis keys |\n\n### Development Environment\n\n```bash\n# No authentication required\nexport REDIS_URL=\"redis://localhost:6379\"\n```\n\n### Production Environment\n\n```bash\n# TLS enabled with authentication\nexport REDIS_URL=\"rediss://redis:6380/0\"\nexport REDIS_PASSWORD=\"your-secure-password\"\n```\n\n## Usage\n\n### Analyze Code\n\nPerform comprehensive code analysis and quality assessment:\n\n```bash\nnpx claude-flow analyze [target] [options]\n```\n\n#### Options\n\n- `-f, --focus <type>` - Analysis focus (quality, security, performance, architecture) **[default: quality]**\n- `-d, --depth <level>` - Analysis depth (quick, deep) **[default: quick]**\n- `--format <format>` - Output format (text, json, report) **[default: text]**\n- `--include-patterns <patterns>` - File patterns to include (comma-separated)\n- `--exclude-patterns <patterns>` - File patterns to exclude (comma-separated)\n\n#### Examples\n\n```bash\n# Quick quality analysis of current directory\nnpx claude-flow analyze\n\n# Deep security analysis of source code\nnpx claude-flow analyze src --focus security --depth deep\n\n# Performance analysis with JSON output\nnpx claude-flow analyze --focus performance --format json\n\n# Architecture review with detailed report\nnpx claude-flow analyze --focus architecture --format report\n\n# Custom file patterns\nnpx claude-flow analyze --include-patterns \"*.py,*.js\" --exclude-patterns \"test/**,node_modules/**\"\n```\n\n#### Analysis Focus Areas\n\n- **quality**: Code maintainability, best practices, complexity analysis\n- **security**: Vulnerability detection, injection risks, unsafe patterns\n- **performance**: Bottleneck identification, optimization opportunities\n- **architecture**: Design patterns, coupling analysis, structural issues\n\n### Initialize Swarm\n\nInitialize a Claude Flow swarm with specified topology and configuration:\n\n```bash\nnpx claude-flow swarm init [options]\n```\n\n#### Options\n\n- `-t, --topology <type>` - Swarm topology (mesh, hierarchical, ring, star) **[default: hierarchical]**\n- `-m, --max-agents <number>` - Maximum number of agents **[default: 8]**\n- `-s, --strategy <type>` - Execution strategy (balanced, parallel, sequential) **[default: parallel]**\n- `--auto-spawn` - Automatically spawn agents based on task complexity\n- `--memory` - Enable cross-session memory persistence\n- `--github` - Enable GitHub integration features\n\n#### Examples\n\n```bash\n# Basic swarm initialization (hierarchical topology)\nnpx claude-flow swarm init\n\n# Mesh topology for research and brainstorming\nnpx claude-flow swarm init --topology mesh --max-agents 5 --strategy balanced\n\n# Hierarchical topology for development projects\nnpx claude-flow swarm init --topology hierarchical --max-agents 10 --strategy parallel --auto-spawn\n\n# Star topology with GitHub integration\nnpx claude-flow swarm init --topology star --github --memory\n```\n\n### Spawn Agents\n\nSpawn a new agent in the current swarm:\n\n```bash\nnpx claude-flow agent spawn [options]\n```\n\n#### Options\n\n- `-t, --type <type>` - Agent type (coder, researcher, analyst, tester, coordinator) **[required]**\n- `-n, --name <name>` - Custom agent name\n- `-s, --skills <skills>` - Specific skills (comma-separated)\n\n#### Examples\n\n```bash\n# Spawn a coder agent with default settings\nnpx claude-flow agent spawn --type coder\n\n# Spawn a researcher with custom name\nnpx claude-flow agent spawn --type researcher --name \"API Expert\"\n\n# Spawn an analyst with specific skills\nnpx claude-flow agent spawn --type analyst --skills \"data-analysis,reporting,visualization\"\n\n# Spawn a coordinator with custom name and skills\nnpx claude-flow agent spawn --type coordinator --name \"TaskMaster\" --skills \"orchestration,workflow-management\"\n```\n\n### Swarm Topologies\n\n- **mesh**: All agents connect to all others - Best for research, exploration, brainstorming with maximum information sharing\n- **hierarchical**: Tree structure with clear command chain - Best for development, structured tasks, large projects\n- **ring**: Agents connect in a circle - Best for pipeline processing, sequential workflows with ordered processing\n- **star**: Central coordinator with satellite agents - Best for simple tasks with centralized control\n\n### Agent Types\n\n- **coder**: Python, JavaScript, TypeScript development\n- **researcher**: Research, analysis, data collection\n- **analyst**: Data analysis, reporting, insights\n- **tester**: Testing, QA, validation, automation\n- **coordinator**: Coordination, orchestration, task distribution\n\n## Development\n\n```bash\n# Install dependencies\nnpm install\n\n# Build the project\nnpm run build\n\n# Run tests\nnpm test\n\n# Run in development mode\nnpm run dev\n\n# Run with coverage\nnpm run test:coverage\n```\n\n## Architecture\n\nThe CLI tool bridges Node.js with the Python-based ACGS-2 EnhancedAgentBus:\n\n1. **CLI Layer** (Node.js/TypeScript): Command parsing and user interaction\n2. **Service Layer** (Node.js): Business logic and Python process management\n3. **Integration Layer** (Python): Direct interface with EnhancedAgentBus\n4. **ACGS-2 Core** (Python): Agent registration and constitutional validation\n\n## Persistent Memory\n\nClaude Flow includes Redis-backed persistent memory for maintaining governance state across sessions and service restarts. This enables adaptive governance through continuous learning from historical decisions.\n\n### Features\n\n- **State Persistence**: Governance decisions and agent state survive service restarts and pod rescheduling\n- **TTL Support**: Automatic expiration of memory entries with configurable time-to-live\n- **Graceful Degradation**: Service continues operating in degraded mode if Redis is unavailable\n- **TLS Support**: Automatic detection of `rediss://` URLs for production TLS connections\n- **Connection Pooling**: Single shared Redis client instance for optimal performance\n- **Non-Blocking Operations**: Uses SCAN for pattern-based operations (never KEYS)\n\n### Performance\n\n- **Latency Target**: <10ms for get/set operations (p95)\n- **Reconnection**: Exponential backoff with configurable max attempts\n- **Batch Processing**: Cleanup operations process keys in batches of 100\n\n### Usage\n\nThe `--memory` flag enables persistent memory when initializing a swarm:\n\n```bash\n# Enable persistent memory with swarm initialization\nnpx claude-flow swarm init --memory\n\n# Combine with other options\nnpx claude-flow swarm init --topology hierarchical --memory --github\n```\n\n### Operations Documentation\n\nFor detailed backup/restore procedures and troubleshooting, see [MEMORY_OPERATIONS.md](docs/MEMORY_OPERATIONS.md).\n\n## Error Handling\n\nThe tool provides comprehensive error handling with helpful messages:\n\n- \u2705 **Success**: Agent spawned with ID and details\n- \u274c **Validation Errors**: Invalid types, names, or parameters\n- \ud83d\udd27 **System Errors**: Python/ACGS-2 connectivity issues\n- \ud83d\udca1 **Suggestions**: Helpful hints for common issues\n\n## Security\n\nAll agent spawning operations include:\n- Constitutional hash validation (`cdd01ef066bc6cf`)\n- Tenant isolation\n- Capability-based access control\n- Audit trail generation\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch\n3. Add tests for new functionality\n4. Ensure all tests pass\n5. Submit a pull request\n\n## License\n\nMIT - See LICENSE file for details\n",
        "timestamp": "2026-01-04T05:35:52.969195"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "Add JSDoc coverage for claude-flow TypeScript service public exports",
        "description": "Add comprehensive JSDoc documentation to the 45 exported functions/classes across 17 TypeScript files in the claude-flow CLI tool to improve API documentation for enterprise users",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-04T05:35:53.020480",
  "last_updated": "2026-01-04T05:35:53.036384"
}