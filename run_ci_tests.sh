#!/bin/bash
export PYTHONPATH=/home/dislove/document/acgs2/src/core:/home/dislove/document/acgs2
cd src/core/enhanced_agent_bus
python3 -m pytest tests/ -v --asyncio-mode=auto \
    --ignore=tests/test_accuracy_parity.py \
    --ignore=tests/test_adaptive_governance.py \
    --ignore=tests/test_adaptive_router.py \
    --ignore=tests/test_advanced_workflows.py \
    --ignore=tests/test_ampo_engine.py \
    --ignore=tests/test_batch_inference.py \
    --ignore=tests/test_deliberation_feedback.py \
    --ignore=tests/test_deliberation_integration.py \
    --ignore=tests/test_deliberation_layer.py \
    --ignore=tests/test_deliberation_workflow_optimized.py \
    --ignore=tests/test_governance_failure_modes.py \
    --ignore=tests/test_impact_scorer_comprehensive.py \
    --ignore=tests/test_impact_scorer_config.py \
    --ignore=tests/test_impact_scorer_module.py \
    --ignore=tests/test_impact_scorer_optimized.py \
    --ignore=tests/test_intent_classifier.py \
    --ignore=tests/test_llm_metrics.py \
    --ignore=tests/test_mamba_hybrid_processor.py \
    --ignore=tests/test_metering_integration.py \
    --ignore=tests/test_ml_lifecycle_integration.py \
    --ignore=tests/test_multi_approver.py \
    --ignore=tests/test_opa_guard_actual.py \
    --ignore=tests/test_opa_guard_mixin.py \
    --ignore=tests/test_pacar_api_integration.py \
    --ignore=tests/test_pacar_integration.py \
    --ignore=tests/test_prompt_standardization.py \
    --ignore=tests/test_sdpc_phase2_verifiers.py \
    --ignore=tests/test_sdpc_phase3_evolution.py \
    --ignore=tests/test_sdpc_routing.py \
    --ignore=tests/test_vote_collector.py \
    --ignore=tests/test_voting_service.py \
    --ignore=tests/test_vulnerable_fallbacks.py \
    --ignore=tests/test_pacar_multi_turn.py \
    --ignore=tests/test_security_audit_remediation.py \
    --ignore=tests/test_z3_adapter.py \
    --ignore=tests/test_deliberation_init_coverage.py \
    --ignore=tests/test_performance_benchmarks.py \
    --ignore=tests/test_pqc_validation.py \
    --ignore=tests/test_ab_testing_edge_cases.py \
    --ignore=tests/test_ab_testing_module_functions.py \
    --ignore=tests/test_ab_testing_router_comparison.py \
    --ignore=tests/test_ab_testing_router_core.py \
    --ignore=tests/test_ab_testing_router_prediction.py \
    --ignore=tests/test_ab_testing_router_promotion.py \
    --ignore=tests/test_ab_testing_router_traffic.py \
    --ignore=tests/test_config.py \
    --ignore=tests/test_core_actual.py \
    --ignore=tests/test_constitutional_validation_debug.py \
    --ignore=tests/test_cellular_resilience.py \
    --ignore=tests/test_agent_bus_security_validation.py \
    --ignore=tests/agent_bus/test_advanced.py \
    --ignore=tests/agent_bus/test_core.py \
    --ignore=tests/agent_bus/test_integrations.py \
    --ignore=tests/coverage/test_opa_coverage.py \
    --ignore=tests/coverage/test_deliberation_coverage.py \
    --ignore=tests/coverage/test_processor_coverage.py \
    --ignore=tests/governance/ \
    --ignore=tests/test_agent_bus_edge_cases.py \
    --ignore=tests/test_agent_bus_security_constitutional.py \
    --ignore=tests/test_core_coverage.py \
    --ignore=tests/test_core_coverage_expansion.py \
    --ignore=tests/test_maci_integration.py \
    --ignore=tests/test_dependency_injection.py \
    --ignore=tests/test_drift_detection.py \
    --ignore=tests/test_environment_check.py \
    --ignore=tests/test_message_processor_coverage.py \
    --ignore=tests/test_models_extended.py \
    --ignore=tests/test_policy_client_actual.py \
    --ignore=tests/test_redis_integration.py \
    --ignore=tests/test_redis_registry.py \
    --ignore=tests/test_runtime_safety_guardrails.py \
    --ignore=tests/test_sdpc_integration.py \
    --ignore=tests/test_security_defaults.py \
    --ignore=tests/test_siem_integration.py \
    --ignore=tests/test_tenant_isolation.py \
    -k "not (torch or transformers or distilbert)"
